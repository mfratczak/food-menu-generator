version: '3.1'

services:
    api:
        build: #https://docs.docker.com/compose/compose-file/#dockerfile
          context: Docker/python
          dockerfile: Dockerfile
        ports:
          - "1025:80"
        volumes:
          - ./WebServer:/app
        command: python server.py
    web:
        build: 
          context: Docker/npm/
          dockerfile: Dockerfile

        ports:
          - 80:3000
        volumes:
          - ./WebClient:/app
        environment:
          NODE_PORT: 3000
          NODE_MODE: prod
        depends_on:
         - api
        command: [npm, start]
