version: '3.1'

services:
    api-dev:
        build: #https://docs.docker.com/compose/compose-file/#dockerfile
          context: Docker/python
          dockerfile: Dockerfile-dev
        ports:
          - "1026:80"
        volumes:
          - ./WebServer:/app
        command: python server.py
        restart: always
    web-dev:
        build:
          context: Docker/npm/
          dockerfile: Dockerfile-dev
        ports:
          - 8080:3000
        volumes:
          - ./WebClient:/app
        environment:
          NODE_PORT: 3000
          NODE_MODE: prod
        depends_on:
         - api-dev
        command: [npm, start]
        restart: always
